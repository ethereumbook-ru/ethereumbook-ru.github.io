<!DOCTYPE HTML>
<html lang="ru" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Что такое Ethereum? - Осваиваем Ethereum - Mastering Ethereum</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Руководство по Ethereum и разработке смарт-контрактов">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../1_предисловие.html">Предисловие</a></li><li class="chapter-item expanded affix "><a href="../2_глоссарий.html">Глоссарий</a></li><li class="chapter-item expanded affix "><li class="part-title">Книга</li><li class="chapter-item expanded "><a href="../kniga/что_такое_ethereum.html" class="active"><strong aria-hidden="true">1.</strong> Что такое Ethereum?</a></li><li class="chapter-item expanded "><a href="../kniga/введение.html"><strong aria-hidden="true">2.</strong> Введение</a></li><li class="chapter-item expanded "><a href="../kniga/клиенты.html"><strong aria-hidden="true">3.</strong> Клиенты</a></li><li class="chapter-item expanded "><a href="../kniga/ключи_и_адреса.html"><strong aria-hidden="true">4.</strong> Ключи и адреса</a></li><li class="chapter-item expanded "><a href="../kniga/кошельки.html"><strong aria-hidden="true">5.</strong> Кошельки</a></li><li class="chapter-item expanded "><a href="../kniga/транзакции.html"><strong aria-hidden="true">6.</strong> Транзакции</a></li><li class="chapter-item expanded "><a href="../kniga/смарт_контракты_на_solidity.html"><strong aria-hidden="true">7.</strong> Смарт-контракты на Solidity</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Смарт-контракты на Vyper</div></li><li class="chapter-item expanded "><a href="../kniga/безопаность_смарт_контрактов.html"><strong aria-hidden="true">9.</strong> Безопаность смарт-контрактов</a></li><li class="chapter-item expanded "><a href="../kniga/токены.html"><strong aria-hidden="true">10.</strong> Токены</a></li><li class="chapter-item expanded "><a href="../kniga/оракулы.html"><strong aria-hidden="true">11.</strong> Оракулы</a></li><li class="chapter-item expanded "><a href="../kniga/децентрализованные_приложения.html"><strong aria-hidden="true">12.</strong> Децентрализованные приложения</a></li><li class="chapter-item expanded "><a href="../kniga/виртуальная_машина_ethereum.html"><strong aria-hidden="true">13.</strong> Виртуальная машина Ethereum</a></li><li class="chapter-item expanded "><a href="../kniga/консенсус.html"><strong aria-hidden="true">14.</strong> Консенсус</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.</strong> Доп 1. История ветвлений</div></li><li class="chapter-item expanded "><a href="../kniga/дополнение_2_стандарты_eip_erc.html"><strong aria-hidden="true">16.</strong> Доп 2. Стандарты EIP, ERC</a></li><li class="chapter-item expanded "><a href="../kniga/дополнение_3_коды_evm_и_gas.html"><strong aria-hidden="true">17.</strong> Доп 3. Коды EVM и газ</a></li><li class="chapter-item expanded "><a href="../kniga/дополнение_4_инструменты_solidity_разработчика.html"><strong aria-hidden="true">18.</strong> Доп 4. Инструменты разработчика</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">19.</strong> Доп 5. Руководство по web3js</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="../support.html">Поддержка проекта</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Осваиваем Ethereum - Mastering Ethereum</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="Что-такое-ethereum"><a class="header" href="#Что-такое-ethereum">Что такое Ethereum?</a></h1>
<p><code>Ethereum</code> часто называют &quot;мировым компьютером&quot;. Но что это значит? Давайте начнем с технического описания, а затем попытаемся расшифровать его с помощью практического анализа возможностей и характеристик Ethereum, сравнивая его с Bitcoin и другими блокчейн платформами (платформами децентрализованного обмена информацией).</p>
<p>С точки зрения вычеслительных наук, Ethereum - это детерминированная машина состояний, состоящая из всеобще доступного состояния и виртуальной машины, которая применяет изменения к этому состоянию.</p>
<p>С более прикладной точки зрения, Ethereum - это децентрализованная вычислительная инфраструктура с открытым исходным кодом, которая выполняет программы, называемые <code>смарт-контрактами</code>. Она (вычислительная инфраструктура) использует блокчейн для синхронизации и хранения изменений состояния системы, а также криптовалюту под названием <code>эфир</code> (ether) для измерения и ограничения вычислительных ресурсов для выполнения этих программ.</p>
<p>Платформа Ethereum позволяет разработчикам создавать децентрализованные приложения со встроенными экономическими функциями. Обеспечивая высокую доступность, проверяемость, прозрачность и нейтральность, она (платформа) также уменьшает или устраняет цензуру и некоторые риски связанные с посредниками.</p>
<h2 id="По-сравнению-с-Биткойном"><a class="header" href="#По-сравнению-с-Биткойном">По сравнению с Биткойном</a></h2>
<p>Многие люди приходят в Ethereum, уже имея некоторый опыт работы с криптовалютами, в частности с <code>Bitcoin</code>. Ethereum имеет много общего с другими блокчейнами: одноранговая сеть (объединяющая участников), византийский отказоустойчивый алгоритм консенсуса для синхронизации состояния (блокчейн с доказательством работы), использование криптографических примитивов, таких как цифровые подписи и хэши, и цифровая валюта (эфир).</p>
<p>Однако во многих отношениях и цель, и конструкция Ethereum разительно отличаются от тех блокчейнов, которые были до него, включая Bitcoin.</p>
<p>Назначение Ethereum заключается не в том, чтобы быть платежной сетью с цифровой валютой. Хотя цифровая валюта эфир является неотъемлемой частью Ethereum и необходима для его функционирования, эфир задуман как валюта для оплаты использования платформы Ethereum.</p>
<p>В отличие от Bitcoin, который имеет очень ограниченный язык сценариев, Ethereum задуман как программируемый блокчейн общего назначения, на котором работает виртуальная машина, способная выполнять код произвольной и неограниченной сложности. Если скриптовый язык Bitcoin намеренно ограничен простой оценкой истинности/ложности условий расходования средств, то язык Ethereum является полным по Тьюрингу, что означает, что Ethereum может прямо функционировать как компьютер общего назначения.</p>
<h2 id="Компоненты-блокчейна"><a class="header" href="#Компоненты-блокчейна">Компоненты блокчейна</a></h2>
<p>Компонентами блокчейна являются (обычно):</p>
<ul>
<li><strong>одноранговая сеть</strong> (peer-to-peer, p2p), соединяющая участников и распространяющая транзакции и блоки на основе стандартизированного протокола &quot;gossip&quot;.</li>
<li><strong>сообщения</strong> в форме транзакций, представляющие переходы состояний</li>
<li><strong>набор правил консенсуса</strong>, определяющих, что считать транзакцией и как определять правильность транзакции</li>
<li><strong>машина состояний</strong>, которая обрабатывает транзакции в соответствии с правилами консенсуса</li>
<li><strong>цепочка криптографически защищенных блоков</strong>, которая действует как журнал всех проверенных и принятых транзакций</li>
<li><strong>алгоритм консенсуса</strong>, который децентрализует контроль над блокчейном, заставляя участников сотрудничать в обеспечении соблюдения правил консенсуса</li>
<li><strong>теоретико-игровая схема стимулирования</strong> (например, стоимость нахождения правильного доказательства выполнения работы плюс вознаграждение за блок) для экономической безопасности машины состояний в открытой, конкурентной среде.</li>
<li>одна или несколько программных реализаций вышеперечисленного с открытым исходным кодом (&quot;клиенты&quot;).</li>
</ul>
<p>Все или большинство этих компонентов обычно объединены в одном программном клиенте. Например, в Bitcoin эталонная реализация разработана проектом с открытым исходным кодом <strong>Bitcoin Core</strong> и реализована как клиент <strong>bitcoind</strong>. В Ethereum вместо эталонной реализации существует эталонная спецификация - математическое описание системы в <strong>Yellow Paper</strong> (см. раздел &quot;Дальнейшее чтение&quot;). Существует ряд клиентов, которые построены в соответствии с эталонной спецификацией.</p>
<p>В прошлом мы использовали термин &quot;блокчейн&quot; для обозначения всех только что перечисленных компонентов, как сокращенное обозначение комбинации технологий, которые охватывают все описанные характеристики. Однако сегодня существует огромное разнообразие блокчейнов с различными свойствами. Нам нужны уточнения, которые помогут нам понять характеристики рассматриваемого блокчейна, такие как открытый, публичный, глобальный, децентрализованный, нейтральный и устойчивый к цензуре, чтобы определить важные возникающие характеристики системы &quot;блокчейн&quot;.</p>
<h2 id="Рождение-ethereum"><a class="header" href="#Рождение-ethereum">Рождение Ethereum</a></h2>
<p>Все великие инновации решают реальные проблемы, и Ethereum не является исключением. Ethereum был задуман в тот момент, когда люди осознали силу модели Bitcoin и пытались выйти за рамки криптовалютных приложений. Но разработчики столкнулись с проблемой: им нужно было либо строить приложения на основе Bitcoin, либо создавать новый блокчейн. Строить приложение на основе Биткойна означало жить в рамках преднамеренных ограничений сети и пытаться найти обходные пути. Ограниченный набор типов транзакций, типов данных и размеров хранилища данных, казалось, ограничивал типы приложений, которые могли работать непосредственно на Bitcoin; все остальное требовало дополнительных внецепочечных уровней, что сразу же сводило на нет многие преимущества использования публичного блокчейна. Для проектов, которые нуждались в большей свободе и гибкости, оставаясь на цепочке, единственным выходом было создание нового блокчейна. Но это означало много работы: создание всех элементов инфраструктуры, исчерпывающее тестирование и т.д.</p>
<p>В конце 2013 года Виталик Бутерин, молодой программист и энтузиаст биткойна, начал думать о дальнейшем расширении возможностей биткойна и Mastercoin (оверлейный протокол, который расширял биткойн, предлагая элементарные смарт-контракты). В октябре того же года Виталик предложил команде Mastercoin более обобщенный подход, который позволял гибким и скриптовым (но неполными по Тьюрингу) контрактам заменить специализированный язык контрактов Mastercoin. Хотя команда Mastercoin была впечатлена, это предложение было слишком радикальным изменением, чтобы вписаться в их дорожную карту развития.</p>
<p>В декабре 2013 года Виталик начал делиться документом, в котором излагалась идея создания Ethereum: блокчейн общего назначения, полный по Тьюрингу. Несколько десятков человек увидели этот проект и высказали свои замечания, что помогло Виталику доработать предложение.</p>
<p>Оба автора этой книги получили ранний вариант whitepaper и прокомментировали его. Андреас М. Антонопулос был заинтригован этой идеей и задал Виталику множество вопросов об использовании отдельного блокчейна для обеспечения соблюдения правил консенсуса при выполнении смарт-контрактов и о последствиях использования языка, полного по Тьюрингу. Андреас продолжал с большим интересом следить за развитием Ethereum, но находился на ранних стадиях написания своей книги Mastering Bitcoin и принял непосредственное участие в Ethereum только много позже. Однако доктор Гэвин Вуд был одним из первых, кто связался с Виталиком и предложил свою помощь в программировании на C++. Гэвин стал соучредителем, архитектором и техническим директором Ethereum.</p>
<p>Как вспоминает Виталик в своей записи <a href="https://vitalik.ca/general/2017/09/14/prehistory.html">&quot;Предыстория Ethereum&quot;</a>:</p>
<pre><code>Это было время, когда протокол Ethereum был полностью 
моим собственным творением. Однако с этого момента 
к нему начали присоединяться новые участники. 
Самым заметным в протокольной части был Гэвин Вуд...

Гэвину также можно в значительной степени приписать 
заслугу в тонком изменении видения от рассмотрения 
Ethereum как платформы для создания программируемых 
денег, с контрактами на основе блокчейна, которые 
могут хранить цифровые активы и передавать их в 
соответствии с заданными правилами, к вычислительной 
платформе общего назначения. Это началось с  
изменений в акцентах и терминологии, а позже это 
влияние усилилось с усилением акцента на ансамбле 
&quot;Web3&quot;, который рассматривал Ethereum как одну 
из частей набора децентрализованных технологий, 
две другие - Whisper и Swarm.
</code></pre>
<p>Начиная с декабря 2013 года, Виталик и Гэвин совершенствовали и развивали эту идею, вместе создавая протокольный уровень.</p>
<p>Основатели Ethereum думали о блокчейне без конкретной цели, который мог бы поддерживать широкий спектр приложений, будучи запрограммированным. Идея заключалась в том, что, используя блокчейн общего назначения, такой как Ethereum, разработчик может программировать свое конкретное приложение, не прибегая к реализации базовых механизмов одноранговых сетей, блокчейнов, алгоритмов консенсуса и т. д. Платформа Ethereum была разработана для абстрагирования от этих деталей и обеспечения детерминированной и безопасной среды программирования для децентрализованных приложений блокчейна.</p>
<p>Как и Сатоши, Виталик и Гэвин не просто изобрели новую технологию; они объединили новые изобретения с существующими технологиями и представили прототип изобретения.</p>
<p>Основатели работали в течение многих лет, создавая и совершенствуя свое видение. И 30 июля 2015 года был добыт первый блок Ethereum. Мировой компьютер начал служить всему миру.</p>
<p><strong>Примечание.</strong> Статья Виталика Бутерина &quot;Предыстория Ethereum&quot; была опубликована в сентябре 2017 года и представляет собой увлекательный взгляд от первого лица на самые ранние моменты Ethereum. Вы можете прочитать ее на сайте <a href="https://vitalik.ca/general/2017/09/14/prehistory.html">https://vitalik.ca/general/2017/09/14/prehistory.html</a>.</p>
<h2 id="Четыре-этапа-развития-ethereum"><a class="header" href="#Четыре-этапа-развития-ethereum">Четыре этапа развития Ethereum</a></h2>
<p>Развитие Ethereum было запланировано на четыре отдельных этапа, на каждом из которых происходили значительные изменения. На каждом этапе могут выходить подвыпуски, известные как &quot;жесткое разветвление&quot;, которые изменяют функциональность таким образом, что это ломает обратную совместимость.</p>
<p>Четыре основных этапа разработки имеют кодовые названия <code>Frontier</code>, <code>Homestead</code>, <code>Metropolis</code> и <code>Serenity</code>. Промежуточные жесткие разветвления, которые появились на сегодняшний день, имеют кодовые названия <code>Ice Age</code>, <code>DAO</code>, <code>Tangerine Whistle</code>, <code>Spurious Dragon</code>, <code>Byzantium</code>, <code>Constantinople/St. Petersburg</code>, <code>Istanbul</code> и <code>Muir Glacier</code>. Этапы разработки и промежуточные разветвления показаны на следующей временной шкале, которая &quot;датируется&quot; номером блока:</p>
<h3 id="Блок--0"><a class="header" href="#Блок--0">Блок № 0</a></h3>
<p><strong>Frontier</strong> - начальная стадия Ethereum, длившаяся с 30 июля 2015 года по март 2016 года.</p>
<h3 id="Блок--200000"><a class="header" href="#Блок--200000">Блок № 200,000</a></h3>
<p><strong>Ice Age</strong> - жесткое разветвление для введения экспоненциального повышения сложности, чтобы мотивировать переход к PoS, когда он будет готов.</p>
<h3 id="Блок--1150000"><a class="header" href="#Блок--1150000">Блок № 1,150,000</a></h3>
<p><strong>Homestead</strong> - вторая ступень Ethereum, запущенная в марте 2016 года.</p>
<h3 id="Блок--1192000"><a class="header" href="#Блок--1192000">Блок № 1,192,000</a></h3>
<p><strong>DAO</strong> - жесткое разветвление, которое возместило убытки жертвам взломанного контракта DAO и привел к разделению <code>Ethereum</code> и <code>Ethereum Classic</code> на две конкурирующие системы.</p>
<h3 id="Блок--2463000"><a class="header" href="#Блок--2463000">Блок № 2,463,000</a></h3>
<p><strong>Tangerine Whistle</strong> - жесткое разветвление, которое изменило расчет газа для некоторых операций ввода-вывода с высокой нагрузкой и очистивший накопленное состояние от атаки типа &quot;отказ в обслуживании&quot; (DoS), которая использовала низкую стоимость газа для этих операций.</p>
<h3 id="Блок--2675000"><a class="header" href="#Блок--2675000">Блок № 2,675,000</a></h3>
<p><strong>Spurious Dragon</strong> - жесткое разветвление, которое устранило дополнительные вектора DoS-атак и еще одной очистки состояния. Кроме того, добавлен механизм защиты от атак повторного воспроизведения.</p>
<h3 id="Блок--4370000"><a class="header" href="#Блок--4370000">Блок № 4,370,000</a></h3>
<p><strong>Metropolis / Byzantium-Metropolis</strong> - третья ступень развития Ethereum. Запущенный в октябре 2017 года, Byzantium является первой частью Metropolis, добавляя низкоуровневые функциональные возможности и регулируя вознаграждение и сложность блока.</p>
<h3 id="Блок--7280000"><a class="header" href="#Блок--7280000">Блок № 7,280,000</a></h3>
<p><strong>Constantinople/St. Petersburg</strong> планировался как вторая часть Metropolis с аналогичными улучшениями. За несколько часов до его активации была обнаружена критическая ошибка. Поэтому жёсткое разветвление было отложено и переименовано в Санкт-Петербург.</p>
<h3 id="Блок--9069000"><a class="header" href="#Блок--9069000">Блок № 9,069,000</a></h3>
<p><strong>Istanbul</strong> - дополнительное жесткое разветвление с тем же подходом и тем же названием, что и в предыдущих двух.</p>
<h3 id="Блок--9200000"><a class="header" href="#Блок--9200000">Блок № 9,200,000</a></h3>
<p><strong>Muir Glacier</strong> - жесткое разветвление, единственной целью которого была повторная корректировка сложности в связи с экспоненциальным ростом, введенным в Ice Age.</p>
<p>Также были объявлены два жёстких разветвлений, <strong>Berlin</strong> и <strong>London</strong>, и сейчас мы находимся на заключительном этапе развития Ethereum под кодовым названием <strong>Serenity</strong>. Serenity предполагает глубокую реорганизацию инфраструктуры, которая сделает Ethereum более масштабируемым, более безопасным и более устойчивым. Она представлена как вторая версия Ethereum, &quot;Ethereum 2.0&quot;.</p>
<h2 id="ethereum-блокчейн-общего-назначения"><a class="header" href="#ethereum-блокчейн-общего-назначения">Ethereum: блокчейн общего назначения</a></h2>
<p>Оригинальный блокчейн, а именно блокчейн Bitcoin, отслеживает состояние биткойнов и их принадлежность. Биткойн можно представить как распределенную консенсусную машину состояний, где транзакции вызывают глобальный переход состояния, изменяя владение монетами. Переходы состояния ограничены правилами консенсуса, что позволяет всем участникам (в конечном итоге) сходиться к общему (консенсусному) состоянию системы после добычи нескольких блоков.</p>
<p>Ethereum также является распределенной машиной состояний. Но вместо того, чтобы отслеживать только состояние владения валютой, Ethereum отслеживает переходы состояния хранилища данных общего назначения, то есть хранилища, которое может содержать любые данные, выражаемые в виде кортежа ключ-значение. В хранилище данных типа &quot;ключ-значение&quot; хранятся произвольные значения, каждое из которых ссылается на некоторый ключ; например, значение &quot;Mastering Ethereum&quot; ссылается на ключ &quot;Название книги&quot;. В некотором смысле это служит той же цели, что и модель хранения данных в памяти с произвольным доступом (RAM), используемая в большинстве компьютеров общего назначения. В памяти Ethereum хранятся как код, так и данные, а для отслеживания изменений этой памяти во времени используется блокчейн Ethereum. Как и компьютер общего назначения с хранимыми программами, Ethereum может загружать код в свою машину состояний и запускать его, сохраняя полученные изменения состояния в блокчейне. Два критических отличия от большинства компьютеров общего назначения заключаются в том, что изменения состояния Ethereum регулируются правилами консенсуса, а состояние распределяется глобально. Ethereum отвечает на вопрос: &quot;Что если бы мы могли отслеживать любое произвольное состояние и программировать машину состояний для создания всемирного компьютера, работающего на основе консенсуса?&quot;.</p>
<h2 id="Компоненты-ethereum"><a class="header" href="#Компоненты-ethereum">Компоненты Ethereum</a></h2>
<p>В Ethereum компонентами блокчейн-системы, описанной в разделе &quot;Компоненты блокчейна&quot;, являются, в частности:</p>
<h3 id="p2p-сеть"><a class="header" href="#p2p-сеть">P2P-сеть</a></h3>
<p>Ethereum работает в основной сети Ethereum, которая адресуется через TCP-порт 30303, и использует протокол под названием ÐΞVp2p.</p>
<h3 id="Правила-консенсуса"><a class="header" href="#Правила-консенсуса">Правила консенсуса</a></h3>
<p>Правила консенсуса в Ethereum определены в справочной спецификации Yellow Paper (см. Дальнейшее чтение).</p>
<h3 id="Транзакции"><a class="header" href="#Транзакции">Транзакции</a></h3>
<p>Транзакции Ethereum - это сетевые сообщения, которые включают (помимо прочего) отправителя, получателя, значение и полезную нагрузку данных.</p>
<h3 id="Машина-состояний"><a class="header" href="#Машина-состояний">Машина состояний</a></h3>
<p>Переходы между состояниями Ethereum обрабатываются виртуальной машиной Ethereum (EVM) - виртуальной машиной на основе стека, выполняющей байткод (инструкции на машинном языке). Программы EVM, называемые &quot;смарт-контрактами&quot;, пишутся на языках высокого уровня (например, Solidity) и компилируются в байткод для выполнения на EVM.</p>
<h3 id="Структуры-данных"><a class="header" href="#Структуры-данных">Структуры данных</a></h3>
<p>Состояние Ethereum хранится локально на каждом узле в виде базы данных (обычно это LevelDB от Google), которая содержит транзакции и состояние системы в виде сериализованной хешированной структуры данных, называемой деревом Меркла Патриция.</p>
<h3 id="Алгоритм-консенсуса"><a class="header" href="#Алгоритм-консенсуса">Алгоритм консенсуса</a></h3>
<p>Ethereum использует модель консенсуса Биткойна, Nakamoto Consensus, которая использует последовательные блоки с одной подписью, взвешенные по важности PoW для определения самой длинной цепочки и, следовательно, текущего состояния. Однако в ближайшем будущем планируется перейти на систему взвешенного голосования PoS под кодовым названием Casper.</p>
<h3 id="Экономическая-безопасность"><a class="header" href="#Экономическая-безопасность">Экономическая безопасность</a></h3>
<p>В настоящее время Ethereum использует алгоритм PoW под названием Ethash, однако в будущем он будет отменен с переходом на PoS.</p>
<h3 id="Клиенты"><a class="header" href="#Клиенты">Клиенты</a></h3>
<p>Ethereum имеет несколько совместимых реализаций клиентского программного обеспечения, наиболее известными из которых являются Go-Ethereum (Geth) и Parity.</p>
<h2 id="Дополнительная-литература"><a class="header" href="#Дополнительная-литература">Дополнительная литература</a></h2>
<p>Следующие ссылки содержат дополнительную информацию об упомянутых здесь технологиях:</p>
<ul>
<li><a href="https://ethereum.github.io/yellowpaper/paper.pdf">Желтый документ Ethereum</a></li>
<li>The Beige Paper, переработанный вариант Yellow Paper для более широкой аудитории на менее формальном языке: https://github.com/chronaeon/beigepaper</li>
<li>Сетевой протокол ÐΞVp2p: https://github.com/ethereum/devp2p/blob/master/rlpx.md</li>
<li>Список ресурсов виртуальной машины Ethereum: https://eth.wiki/en/concepts/evm/ethereum-virtual-machine-(evm)-awesome-list</li>
<li>База данных LevelDB (чаще всего используется для хранения локальной копии блокчейна): https://github.com/google/leveldb</li>
<li>Патрицианские деревья Меркла: https://eth.wiki/en/fundamentals/patricia-tree</li>
<li>Алгоритм Ethash PoW: https://eth.wiki/en/concepts/ethash/ethash</li>
<li>Casper PoS v1 Implementation Guide: http://bit.ly/2DyPr3l</li>
<li>Клиент Go-Ethereum (Geth): https://geth.ethereum.org/</li>
<li>Клиент Parity Ethereum: https://parity.io/</li>
</ul>
<h2 id="ethereum-и-полнота-по-Тьюрингу"><a class="header" href="#ethereum-и-полнота-по-Тьюрингу">Ethereum и полнота по Тьюрингу</a></h2>
<p>Как только вы начнете читать об Ethereum, вы сразу же столкнетесь с термином &quot;полнота по Тьюрингу&quot;. Говорят, что Ethereum, в отличие от Bitcoin, является полным по Тьюрингу. Что именно это означает?</p>
<p>Этот термин относится к английскому математику Алану Тьюрингу, который считается отцом компьютерной науки. В 1936 году он создал математическую модель компьютера, состоящую из машины состояний, которая манипулирует символами, считывая и записывая их в последовательную память (напоминающую бумажную ленту бесконечной длины). С помощью этой конструкции Тьюринг создал математическую основу для ответа (отрицательного) на вопросы о всеобщей вычислимости, то есть о том, все ли проблемы разрешимы. Он доказал, что существуют классы проблем, которые не поддаются вычислению. В частности, он доказал, что проблема остановки (можно ли, учитывая произвольную программу и ее входные данные, определить, прекратит ли программа в конечном итоге выполнение) не является разрешимой.</p>
<p>Алан Тьюринг также определил, что система является полной по Тьюрингу, если она может быть использована для моделирования любой машины Тьюринга. Такая система называется универсальной машиной Тьюринга (УМТ).</p>
<p>Способность Ethereum выполнять сохраненную программу в машине состояний, называемой виртуальной машиной Ethereum, одновременно с чтением и записью данных в память делает его системой, полной по Тьюрингу, а значит, и УВМ. Ethereum может вычислить любой алгоритм, который может быть вычислен любой машиной Тьюринга, учитывая ограничения конечной памяти.</p>
<p>Новаторская инновация Ethereum заключается в объединении архитектуры вычислений общего назначения компьютера с хранимыми программами с децентрализованным блокчейном, что позволяет создать распределенный односоставной (singleton) мировой компьютер. Программы Ethereum работают &quot;везде&quot;, но при этом создают общее состояние, которое защищено правилами консенсуса.</p>
<h3 id="Полнота-по-Тьюрингу-как-особенность"><a class="header" href="#Полнота-по-Тьюрингу-как-особенность">Полнота по Тьюрингу как &quot;особенность&quot;</a></h3>
<p>Услышав, что Ethereum завершен по Тьюрингу, вы можете прийти к выводу, что это свойство, которое каким-то образом отсутствует в системе, которая по Тьюрингу неполна. Скорее наоборот. Полнота по Тьюрингу достигается очень легко; на самом деле, самая простая из известных Тьюринг-полных машин состояний имеет 4 состояния и использует 6 символов, а определение состояния имеет длину всего 22 инструкции. Действительно, иногда обнаруживается, что системы являются &quot;случайно полными по Тьюрингу&quot;. Увлекательную ссылку на такие системы можно найти на сайте http://bit.ly/2Og1VgX.</p>
<p>Однако полнота по Тьюрингу очень опасна, особенно в системах с открытым доступом, таких как публичные блокчейны, из-за проблемы остановки, которую мы затрагивали ранее. Например, современные принтеры неполны по Тьюрингу, и им можно дать напечатать файлы, которые отправят их в замороженное состояние. Тот факт, что Ethereum является полным по Тьюрингу, означает, что любая программа любой сложности может быть вычислена Ethereum. Однако такая гибкость порождает некоторые острые проблемы безопасности и управления ресурсами. Принтер, не реагирующий на запросы, можно выключить и включить снова. Это невозможно в публичном блокчейне.</p>
<h3 id="Последствия-полноты-Тьюринга"><a class="header" href="#Последствия-полноты-Тьюринга">Последствия полноты Тьюринга</a></h3>
<p>Тьюринг доказал, что невозможно предсказать, завершится ли программа, смоделировав ее на компьютере. Проще говоря, мы не можем предсказать путь программы, не запустив ее. Тьюринг-полные системы могут работать в &quot;бесконечных циклах&quot; - термин, используемый (в чрезмерном упрощении) для описания программы, которая не завершается. Тривиально создать программу, выполняющую цикл, который никогда не заканчивается. Но непреднамеренные бесконечные циклы могут возникать без предупреждения из-за сложных взаимодействий между начальными условиями и кодом. В Ethereum это создает проблему: каждый участвующий узел (клиент) должен подтверждать каждую транзакцию, запуская все смарт-контракты, которые он вызывает. Но, как доказал Тьюринг, Ethereum не может предсказать, завершится ли смарт-контракт или как долго он будет работать, не запустив его на самом деле (возможно, он будет работать вечно). Случайно или специально, смарт-контракт может быть создан таким образом, что он будет выполняться вечно, когда узел пытается его подтвердить. Это фактически DoS-атака. И конечно, между программой, которой требуется миллисекунда для подтверждения, и программой, которая работает вечно, находится бесконечное множество неприятных, ресурсозатратных, раздувающих память, перегревающих процессор программ, которые просто тратят ресурсы. В мировом компьютере программа, которая злоупотребляет ресурсами, получает возможность злоупотреблять ресурсами всего мира. Как Ethereum ограничивает ресурсы, используемые смарт-контрактом, если он не может заранее предсказать использование ресурсов?</p>
<p>Чтобы ответить на этот вызов, Ethereum вводит механизм учета, называемый газом. Когда EVM выполняет смарт-контракт, он тщательно учитывает каждую инструкцию (вычисления, доступ к данным и т. д.). Каждая инструкция имеет заранее определенную стоимость в единицах газа. Когда транзакция запускает выполнение смарт-контракта, она должна включать количество газа, которое устанавливает верхний предел того, что может быть потреблено при выполнении смарт-контракта. EVM прекратит выполнение, если количество газа, потребляемого при вычислениях, превысит количество газа, доступное в транзакции. Газ - это механизм, который Ethereum использует для обеспечения вычислений, завершенных по Тьюрингу, ограничивая при этом ресурсы, которые может потреблять любая программа.</p>
<p>Следующий вопрос: &quot;Как получить газ для оплаты вычислений на мировом компьютере Ethereum? Вы не найдете газ ни на одной бирже. Его можно купить только в рамках транзакции, и купить его можно только за эфир. Эфир должен быть отправлен вместе с транзакцией, и он должен быть явно предназначен для покупки газа, наряду с приемлемой ценой на газ. Как и в насосе, цена на газ не является фиксированной. Газ покупается для транзакции, вычисления выполняются, а неиспользованный газ возвращается обратно отправителю транзакции.</p>
<h2 id="От-блокчейн-общего-назначения-к-децентрализованным-приложениям-dapps"><a class="header" href="#От-блокчейн-общего-назначения-к-децентрализованным-приложениям-dapps">От блокчейн общего назначения к децентрализованным приложениям (DApps)</a></h2>
<p>Ethereum начинался как способ создания блокчейна общего назначения, который можно было программировать для различных целей. Но очень быстро концепция Ethereum расширилась и стала платформой для программирования DApps. DApps представляют собой более широкую перспективу, чем смарт-контракты. DApp - это, как минимум, смарт-контракт и пользовательский веб-интерфейс. В более широком смысле DApp - это веб-приложение, построенное на базе открытых, децентрализованных, одноранговых инфраструктурных сервисов.</p>
<p>DApp состоит как минимум из:</p>
<ul>
<li>смарт-контракты на блокчейне</li>
<li>веб-интерфейс пользователя.</li>
</ul>
<p>Кроме того, многие DApp включают в себя другие децентрализованные компоненты, такие как:</p>
<ul>
<li>Децентрализованный (P2P) протокол и платформа для хранения данных</li>
<li>Децентрализованный (P2P) протокол и платформа для обмена сообщениями.</li>
</ul>
<p><strong>Совет.</strong> Вы можете встретить DApps, написанные как ÐApps. Символ Ð - это латинский символ &quot;ETH&quot;, обозначающий Ethereum. Чтобы отобразить этот символ, используйте кодовую точку Юникода 0xD0 или, при необходимости, HTML-символическую сущность eth (или десятичную сущность #208).</p>
<h2 id="Третья-эпоха-Интернета"><a class="header" href="#Третья-эпоха-Интернета">Третья эпоха Интернета</a></h2>
<p>В 2004 году появился термин &quot;Web 2.0&quot;, описывающий эволюцию Интернета в сторону пользовательского контента, отзывчивых интерфейсов и интерактивности. Web 2.0 - это не техническая спецификация, а скорее термин, описывающий новую направленность веб-приложений.</p>
<p>Концепция DApps призвана перевести Всемирную паутину на следующий естественный этап эволюции, внедряя децентрализацию с протоколами peer-to-peer в каждый аспект веб-приложения. Для описания этой эволюции используется термин web3, означающий третью &quot;версию&quot; веба. Впервые предложенный доктором Гэвином Вудом, web3 представляет собой новое видение и фокус для веб-приложений: от централизованных и управляемых приложений к приложениям, построенным на децентрализованных протоколах.</p>
<p>В последующих главах мы изучим библиотеку Ethereum web3.js JavaScript, которая связывает приложения JavaScript, запускаемые в браузере, с блокчейном Ethereum. Библиотека web3.js также включает интерфейс к сети хранения данных P2P под названием Swarm и службе обмена сообщениями P2P под названием Whisper. Благодаря этим трем компонентам, включенным в библиотеку JavaScript, работающую в вашем браузере, разработчики получают полный набор средств разработки приложений, позволяющий им создавать web3 DApps.</p>
<h2 id="Культура-разработки-ethereum"><a class="header" href="#Культура-разработки-ethereum">Культура разработки Ethereum</a></h2>
<p>До сих пор мы говорили о том, как цели и технологии Ethereum отличаются от целей и технологий других блокчейнов, предшествовавших ему, таких как Bitcoin. В Ethereum также совершенно иная культура разработки.</p>
<p>В Биткойне разработка ведется на основе консервативных принципов: все изменения тщательно изучаются, чтобы ни одна из существующих систем не была нарушена. По большей части изменения внедряются только в том случае, если они обратно совместимы. Существующим клиентам разрешается отказаться от обновления, но они будут продолжать работать, если решат не обновляться.</p>
<p>В Ethereum, для сравнения, культура разработки сообщества ориентирована на будущее, а не на прошлое. Мантра (не совсем серьезная) гласит: &quot;Двигайся быстро и ломай вещи&quot;. Если необходимо внести изменения, они будут реализованы, даже если это означает, что недействительны предыдущие предположения, нарушена совместимость или клиенты вынуждены обновляться. Культура разработки Ethereum характеризуется быстрыми инновациями, быстрой эволюцией и готовностью внедрять перспективные улучшения, даже если это происходит за счет некоторой обратной совместимости.</p>
<p>Для вас как разработчика это означает, что вы должны сохранять гибкость и быть готовыми перестроить свою инфраструктуру, когда некоторые из базовых предпосылок изменятся. Одной из серьезных проблем, с которыми сталкиваются разработчики Ethereum, является противоречие между развертыванием кода в неизменной системе и платформой разработки, которая продолжает развиваться. Вы не можете просто &quot;обновить&quot; свои смарт-контракты. Вы должны быть готовы развернуть новые, перенести пользователей, приложения и средства и начать все сначала.</p>
<p>Как ни странно, это также означает, что цель создания систем с большей автономией и меньшим централизованным контролем все еще не полностью реализована. Автономия и децентрализация требуют немного большей стабильности платформы, чем та, которую вы, вероятно, получите в Ethereum в ближайшие несколько лет. Для того чтобы &quot;развивать&quot; платформу, вы должны быть готовы отбраковывать и перезапускать свои смарт-контракты, что означает, что вы должны сохранять определенную степень контроля над ними.</p>
<p>Но, с положительной стороны, Ethereum движется вперед очень быстро. Здесь мало возможностей для &quot;велосипедного шеддинга&quot; - выражения, означающего задержку развития из-за споров о мелких деталях, например, о том, как построить велосипедный сарай на заднем дворе атомной электростанции. Если вы начнете спорить, вы можете внезапно обнаружить, что пока вы отвлекались, остальная команда разработчиков изменила план и отказалась от велосипедов в пользу автономных судов на воздушной подушке.</p>
<p>В конце концов, развитие платформы Ethereum замедлится, и ее интерфейсы станут фиксированными. А пока инновации являются движущим принципом. Вам лучше не отставать, потому что никто не будет тормозить за вас.</p>
<h2 id="Зачем-изучать-ethereum"><a class="header" href="#Зачем-изучать-ethereum">Зачем изучать Ethereum?</a></h2>
<p>Блокчейн имеет очень крутую кривую обучения, поскольку он объединяет множество дисциплин в одну область: программирование, информационную безопасность, криптографию, экономику, распределенные системы, одноранговые сети и т. д. Ethereum делает эту кривую обучения гораздо менее крутой, поэтому вы можете быстро приступить к работе. Но под поверхностью обманчиво простой среды скрывается гораздо больше. По мере того как вы учитесь и начинаете смотреть глубже, всегда появляется еще один слой сложности и удивительного.</p>
<p>Ethereum - отличная платформа для изучения блокчейн, и она создает огромное сообщество разработчиков быстрее, чем любая другая платформа блокчейн. Как никакая другая, Ethereum - это блокчейн для разработчиков, созданный разработчиками для разработчиков. Разработчик, знакомый с приложениями на JavaScript, может зайти в Ethereum и очень быстро начать создавать рабочий код. В течение первых нескольких лет существования Ethereum часто можно было увидеть футболки с объявлениями о том, что вы можете создать токен всего за пять строк кода. Конечно, это обоюдоострый меч. Легко написать код, но очень трудно написать хороший и безопасный код.</p>
<h2 id="Чему-вас-научит-эта-книга"><a class="header" href="#Чему-вас-научит-эта-книга">Чему вас научит эта книга</a></h2>
<p>В этой книге вы погрузитесь в Ethereum и рассмотрите каждый компонент. Вы начнете с простой транзакции, разберете, как она работает, создадите простой контракт, сделаете его лучше и проследите его путь по системе Ethereum.</p>
<p>Вы узнаете не только о том, как использовать Ethereum - как он работает, - но и о том, почему он устроен именно так, как устроен. Вы сможете понять, как работает каждая из частей, как они сочетаются друг с другом и почему.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../2_глоссарий.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../kniga/введение.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../2_глоссарий.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../kniga/введение.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
